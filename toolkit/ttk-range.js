(function(k){function l(b,c,a){if("disabled"!==b.get("disabled")){a=a.screenX;var d=b.position(),g=d.left,e=d.right-c.position().width,d=parseFloat(b.get("value"));if(g<=a&&a<=e){a-=g;var f=parseFloat(b.get("min")),h=parseFloat(b.get("max")),j=parseFloat(b.get("step"));a=f+j*Math.round(a/(e-g)*(h-f)/j);if(!(a>h||a===d))if(c.css("left",parseInt(1E3*(a-f)/(h-f))/10+"%"),c.set("title",a),b.set("value",a),b.onchange)b.onchange({value:a})}}}function m(b){if(exists(b)){var c={disabled:!1,type:"range",id:b.id||
"",min:b.get("min")||"0",max:b.get("max")||"100",step:b.get("step")||"1",value:b.get("value")||"0","class":b.get("class")||"",style:b.get("style")||""},a=create("div",c);b.onchange&&(a.onchange=b.onchange);a.classes().add("tiny-toolkit-input-type-range");var d=create("span",{"class":"tiny-toolkit-input-type-range-slider"});d.set("title",c.value);a.add(d);var g=a.set;a.set=function(b,c){var f=g.call(a,b,c);if(-1!==["min","max","value"].indexOf(b)){var e=a.get("min"),h=a.get("max"),j=a.get("value");
d.css("left",100*(j-e)/(h-e)+"%")}return f};d.onselectstart=function(){return!1};d.onmousedown=function(){return!1};a.onselectstart=function(){return!1};a.onmousedown=function(){return!1};var e=!1,f=-1,h=function(b){if(1===b.which||1===b.button)return a.set("sdown",!0),l(a,d,{screenX:b.screenX}),!1};a.listen("mousedown",function(a){if(!e)return h(a)});a.listen("touchstart",function(a){e=!0;a.which=a.button=1;a.screenX=a.touches.item(0).screenX;return h(a)});document.listen("mousemove",function(b){e||
"true"===a.get("sdown")&&l(a,d,b)});document.listen("touchmove",function(b){var c=(new Date).getTime();e&&-1===f&&"true"===a.get("sdown")?(b.screenX=b.touches.item(0).screenX,l(a,d,b),f=c):100<c-f&&(f=-1)});document.listen("mouseup",function(){e||a.set("sdown",!1)});document.listen("touchend",function(){a.set("sdown",!1);e=!1;f=-1});if("0"!==c.value){b=parseFloat(c.min);var j=parseFloat(c.max),c=parseFloat(c.value);d.css("left",100*(c-b)/(j-b)+"%")}a.disable=function(){a.set("disabled","disabled");
a.show(!1);d.show(!1)};a.enable=function(){a.set("disabled",!1);a.show(!0);d.show(!0)};return a}}if(k.Toolkit){var g=HTMLInputElement.prototype,n=g.set;g.set=function(b,c){if(!b||"type"!==b||!c||"range"!==c)return n.apply(this,b,c);var a=m(this);this.parent()&&this.replace(a);return a};k.Toolkit.substitute=m;g=function(b){(b||k).find("input[type=range]").forEach(function(b){exists(b)&&b.parent()&&b.parent().replace(b,m(b))})};g();document.listenOnce("DOMContentLoaded",g)}})(window);
