<!doctype html>
<html style="height: 100%;">
  <head>
    <meta charset="utf-8">
    <title>A Math Parser for Processing, written in Processing</title>
    <script src="processing.js"></script>
    <script src="Double.js"></script>
    <script>
      var $ = function(s) { return document.querySelector(s); };
      var y_backup = "",
          y_placeholder = "cos(t) - sin(t)^2 + sin(t)";

      function plot() {
        var fx = $('#function_x').value || $('#function_x').placeholder;
        var fy = $('#function_y').value || $('#function_y').placeholder;
        var v = $('#variable').value || $('#variable').placeholder;
        var s = $('#start').value || $('#start').placeholder;
        var e = $('#end').value || $('#end').placeholder;
        var steps = $('#steps').value || $('#steps').placeholder;
        
        if(!$('#parametric').checked) { fy = null; }

        Processing.getInstanceById("plot").plot(fx,fy,v,parseFloat(s),parseFloat(e),parseInt(steps));
      }
      
      function checkbox(input) {
        var on = input.checked, off = !on;
        $("#params").style.display = (off ? "none" : "block");
        $('#function_y').placeholder = y_placeholder;
        $('#paramlabel_x').innerHTML = (off ? "" : " for x");
        $('#paramlabel_y').innerHTML = (off ? "" : " for y");
        plot();
      }
    </script>
    <style>
    #function_x, #function_y { width: 23em; }
    #variable { width: 2em; text-align: center; }
    #start, #end, #steps { width: 3em; text-align: center; }
    #params { margin-bottom: 1em; }
    dl { margin-left: 1em; }
    dl * { line-height: 1.2em; }
    dt { font-family: monospace; }
    dd { margin-top: -1.1em; padding-left: 2em; }
    p { margin: 0; padding: 0; }
    p + p { margin-top: 1.2em; }
    div canvas { margin-top: 2em; }
    </style>
  </head>
  
  <body style="vertical-align: top; height: 90%;">
    <a href="https://github.com/pomax/mathparser">
      <img style="position: absolute; float: right; top: 0; right: 0; border: 0; opacity: 0.7;"
           src="https://a248.e.akamai.net/assets.github.com/img/71eeaab9d563c2b3c590319b398dd35683265e85/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67"
           alt="Fork me on GitHub"></a>
  
  
    <h2>A math function parser for Processing, written in Processing</h2>

    <div style="float:left;">
      <div>
        Type a function<span id="paramlabel_x"></span>: <input type="text" placeholder="sin(t) - cos(t)" id="function_x"><br>
        parametric function: <input type="checkbox" id="parametric" onchange="checkbox(this)"><br>
        <div id="params" style="display: none">
          Type a function<span id="paramlabel_y"> for y</span>: <input type="text" placeholder="cos(t) - sin(t)^2 + sin(t)" id="function_y">
        </div>
        Name of the controlled variable: <input type="text" placeholder="t" id="variable"><br>
        Range: start = <input type="text" placeholder="0" id="start">
               end = <input type="text" placeholder="6.3" id="end">
               (using <input type="text" placeholder="250" id="steps"> steps)<br>
        <input type="button" value="Plot function" onclick="plot()">
      </div>
      
      <div>
        <canvas id="plot" data-processing-sources="ArithmeticFragment.pde FunctionTree.pde Tape.pde mathparser.pde" style="clear: both; border: 1px solid black;"></canvas>     
      </div>
    </div>

    <div style="float: right; width: 500px; height: 90%; overflow-y: scroll; padding-right: 2em;">
      <p>The API (<i>a.k.a. "what can I use"</i>):</p>
      
      <p><strong>unary operators</strong></p>

      <dl>
        <dt>-n</dt><dd>negative n</dd>
        <dt>n!</dt><dd>factorial of n</dd>
      </dl>     

      <p><strong>binary operators</strong></p>

      <dl>
        <dt>n+m</dt><dd>m added to n</dd>
        <dt>n-m</dt><dd>m subtracted from n</dd>
        <dt>n*m</dt><dd>n multiplied bm m</dd>
        <dt>n/m</dt><dd>n divided bm m</dd>
        <dt>n^m</dt><dd>n raised to the power m</dd>
        <dt>(…)</dt><dd>explicit grouping</dd>
      </dl>
      
      <p><strong>operator order</strong></p>
      
      <dl>
        <dt>1</dt><dd>barring explicit groups, ! is evaluated first,</dd>
        <dt>2</dt><dd>then ^ is evaluated,</dd>
        <dt>3</dt><dd>then the negating - is evaluated,</dd>
        <dt>4</dt><dd>then * and / are evaluated, </dd>
        <dt>5</dt><dd>and then, finally, + and - are evaluated.</dd>
      </dl>
      
      <p>In a statement like "t^2 - t + 10", equal order operators
      are resolved left to right, so this is equivalent to "(t^2 - t) + 10".</p>

      <p><strong>constants</strong></p>
      
      <dl>
        <dt>e</dt><dd>the natural logarithm base</dd>
        <dt>pi</dt><dd>the circumference of a circle with diameter 0.5</dd>
      </dl>
      
      <p><strong>functions</strong></p>
      
      <dl>
        <dt>sin(x)</dt><dd>the sine function</dd>
        <dt>cos(x)</dt><dd>the cosine function</dd>
        <dt>tan(x)</dt><dd>the tangent function</dd>
        <dt>asin(x)</dt><dd>the arcsine function</dd>
        <dt>acos(x)</dt><dd>the arccosine function</dd>
        <dt>atan(x)</dt><dd>the arctangent function</dd>
        <dt>sinh(x)</dt><dd>the hyperbolic sine function</dd>
        <dt>cosh(x)</dt><dd>the hyperbolic cosine function</dd>
        <dt>tanh(x)</dt><dd>the hyperbolic tangent function</dd>
        <dt>ln(x)</dt><dd>the natural logarithm function (using base <i>e</i>)</dd>
        <dt>log(x)</dt><dd>the decimal logarithm function (using base 10)</dd>
        <dt>sqrt(x)</dt><dd>the square root function</dd>
        <dt>abs(x)</dt><dd>the absolute value function</dd>
      </dl>
      
      <p>There is no <code>exp</code> function - just use <i>e</i><code>^</code><i>x</i>.
      There are also no other exponent function beyond <code>sqrt</code>,
      which is just something that effects <i>x</i><code>^</code>0.5 — simply
      use the <code>^</code> operator for anything involving roots and powers.</p>

      <p>Also, if you need a different base logarithmic function,
      use log division: base 2 is log(x)/log(2), base pi is log(x)/log(pi),
      etc.</p>
    </div>

  </body>
</html>